<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TKT - Documentation</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        line-height: 1.6;
        max-width: 700px;
        margin: 2rem auto;
        padding: 0 1rem;
      }

      header h1 {
        text-align: center;
      }

      pre {
        background-color: #f5f5f5;
        padding: 0.75em 1em;
        border-radius: 6px;
        overflow-x: auto;
        position: relative; /* so the button can be positioned */
      }

      code {
        font-family: monospace, monospace;
        font-size: 0.95em;
      }

      p code {
        background-color: #eee;
        padding: 0.2em 0.4em;
        border-radius: 4px;
      }

      a {
        color: #0366d6;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .no-select {
        -webkit-user-select: none;
        user-select: none;
      }

      .copy-btn {
        position: absolute;
        top: 6px;
        right: 6px;
        padding: 2px 6px;
        font-size: 0.8em;
        cursor: pointer;
        border: 1px solid #ccc;
        border-radius: 4px;
        background: white;
      }

      .grey {
        color: grey;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>TKT Documentation</h1>
    </header>
    <main>
      <p>This is where TKT development will be documented.</p>
      <p>
        If you are using Arch Linux, you can compile the kernel
        with the following command:
      </p>
      <pre><code><span class="no-select grey">$ </span>makepkg -si</code></pre>

      <p>
        For any other distributions, the recommended way is by using
        the <code>install.sh</code> script as such:
      </p>
      <pre><code><span class="no-select grey">$ </span>bash install.sh install</code></pre>

      <p>
        For more information, check out the
        <a href="https://github.com/The-Kernel-Toolkit/TKT/blob/main/docs/COMPILATION_GUIDELINE.md">compilation guideline</a>.
      </p>
    </main>

    <script>
      document.querySelectorAll("pre:has(code)").forEach((block) => {
        const btn = document.createElement("button");
        btn.className = "copy-btn no-select";
        btn.textContent = "Copy";

        btn.addEventListener("click", () => {
          const code = block.innerText
            .replace(/^\$\s*/m, "")
            .replace(new RegExp(`${btn.textContent}$`), '');
          navigator.clipboard.writeText(code.trim() + '\n').then(() => {
            btn.textContent = "Copied!";
            setTimeout(() => (btn.textContent = "Copy"), 1500);
          });
        });

        block.appendChild(btn);
      });
    </script>
  </body>
</html>
